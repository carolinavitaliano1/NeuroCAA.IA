<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>üß† Prancha Compartilhada</title>

  <link rel="stylesheet" href="css/style.css">

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>

<body>
  <div class="container">
    <h1>üß† Prancha Compartilhada</h1>
    <div id="board" class="board"></div>
  </div>

  <script>
    // üî• Firebase config (igual ao index)
    const firebaseConfig = {
      apiKey: "AIzaSyDPwPgsjw0bUrwfvt7242MGEekOdKuT1_8",
      authDomain: "neurocaa-1460e.firebaseapp.com",
      projectId: "neurocaa-1460e",
      storageBucket: "neurocaa-1460e.appspot.com",
      messagingSenderId: "788969719580",
      appId: "1:788969719580:web:fce897a25a2f46dcdadcd9",
      databaseURL: "https://neurocaa-1460e-default-rtdb.firebaseio.com"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // üîë pega o shareId da URL
    const params = new URLSearchParams(window.location.search);
    const shareId = params.get("id");

    if (!shareId) {
      document.body.innerHTML = "<h2>‚ùå Link inv√°lido</h2>";
      throw new Error("shareId ausente");
    }

    // üì• busca no local CORRETO
    db.ref("sharedBoards/" + shareId).once("value")
      .then(snapshot => {
        if (!snapshot.exists()) {
          document.body.innerHTML = "<h2>‚ùå Conte√∫do indispon√≠vel</h2>";
          return;
        }

        const data = snapshot.val();
        renderBoard(data.board, data.config);
      });

    // üé® renderiza√ß√£o simples da prancha
    function renderBoard(board, config) {
      const boardEl = document.getElementById("board");
      boardEl.innerHTML = "";

      boardEl.style.gridTemplateColumns =
        `repeat(${config.columns || 4}, 1fr)`;
      boardEl.style.gap = (config.cellGap || 10) + "px";

      board.forEach(cell => {
        const div = document.createElement("div");
        div.className = "cell";

        const img = document.createElement("img");
        img.src = cell.image;
        img.alt = cell.text;

        const p = document.createElement("p");
        p.textContent = cell.text;

        div.appendChild(img);
        div.appendChild(p);
        boardEl.appendChild(div);
      });
    }
  </script>
</body>
</html>
